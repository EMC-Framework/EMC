1.20.3:
  extends: .build
  script:
    - ./gradlew publish --stacktrace
  rules:
    - if: $CI_COMMIT_MESSAGE =~ /^1.20.3/
    - if: $CI_COMMIT_MESSAGE =~ /^all/

1.20.2:
  extends: .build
  script:
    - ./gradlew publish --stacktrace
  rules:
    - if: $CI_COMMIT_MESSAGE =~ /^1.20.2/
    - if: $CI_COMMIT_MESSAGE =~ /^all/

1.20.1:
  extends: .build
  script:
    - ./gradlew publish --stacktrace
    - sed -i -e 's/fabric/forge/g' gradle.properties
    - ./gradlew clean publish --stacktrace
  rules:
    - if: $CI_COMMIT_MESSAGE =~ /^1.20.1/
    - if: $CI_COMMIT_MESSAGE =~ /^all/

1.20.0:
  extends: .build
  script:
    - ./gradlew publish --stacktrace
    - sed -i -e 's/fabric/forge/g' gradle.properties
    - ./gradlew clean publish --stacktrace
  rules:
    - if: $CI_COMMIT_MESSAGE =~ /^1.20.0/
    - if: $CI_COMMIT_MESSAGE =~ /^all/

1.19.4:
  extends: .build
  script:
    - ./gradlew publish --stacktrace
    - sed -i -e 's/fabric/forge/g' gradle.properties
    - ./gradlew clean publish --stacktrace
  rules:
    - if: $CI_COMMIT_MESSAGE =~ /^1.19.4/
    - if: $CI_COMMIT_MESSAGE =~ /^all/

1.19.2:
  extends: .build
  script:
    - ./gradlew publish --stacktrace
    - sed -i -e 's/fabric/forge/g' gradle.properties
    - ./gradlew clean publish --stacktrace
  rules:
    - if: $CI_COMMIT_MESSAGE =~ /^1.19.2/
    - if: $CI_COMMIT_MESSAGE =~ /^all/

1.18.2:
  extends: .build
  script:
    - ./gradlew publish --stacktrace
    - sed -i -e 's/fabric/forge/g' gradle.properties
    - ./gradlew clean publish --stacktrace
  rules:
    - if: $CI_COMMIT_MESSAGE =~ /^1.18.2/
    - if: $CI_COMMIT_MESSAGE =~ /^all/

1.17.1:
  extends: .build
  script:
    - ./gradlew publish --stacktrace
    - sed -i -e 's/fabric/forge/g' gradle.properties
    - ./gradlew clean publish --stacktrace
  rules:
    - if: $CI_COMMIT_MESSAGE =~ /^1.17.1/
    - if: $CI_COMMIT_MESSAGE =~ /^all/

1.16.5:
  extends: .build
  script:
    - ./gradlew publish --stacktrace
    - sed -i -e 's/fabric/forge/g' gradle.properties
    - ./gradlew clean publish --stacktrace
  rules:
    - if: $CI_COMMIT_MESSAGE =~ /^1.16.5/
    - if: $CI_COMMIT_MESSAGE =~ /^all/

1.15.2:
  extends: .build
  script:
    - ./gradlew publish --stacktrace
  rules:
    - if: $CI_COMMIT_MESSAGE =~ /^1.15.2/
    - if: $CI_COMMIT_MESSAGE =~ /^all/

1.14.4:
  extends: .build
  script:
    - ./gradlew publish --stacktrace
  rules:
    - if: $CI_COMMIT_MESSAGE =~ /^1.14.4/
    - if: $CI_COMMIT_MESSAGE =~ /^all/

1.13.2:
  extends: .build
  image: kaiwinter/docker-java8-maven
  script:
    - apt update && apt install -y git
    - chmod +x mcpconfig.sh
    - ./mcpconfig.sh
    - ./gradlew build --stacktrace
  rules:
    - if: $CI_COMMIT_MESSAGE =~ /^1.13.2/
    - if: $CI_COMMIT_MESSAGE =~ /^all/
  cache:
    key: "MCPConfig"
    paths:
      - "$SRC_DIR/$CI_JOB_NAME/MCPConfig"

1.12.2:
  extends: .build
  image: kaiwinter/docker-java8-maven
  script:
    - ./gradlew setupCiWorkspace
    - ./gradlew clean build
    - ./gradlew clean build -Pforgebuild=true
  rules:
    - if: $CI_COMMIT_MESSAGE =~ /^1.12.2/
    - if: $CI_COMMIT_MESSAGE =~ /^all/

1.8.9:
  extends: .build
  image: kaiwinter/docker-java8-maven
  script:
    - ./gradlew setupDecompWorkspace
    - ./gradlew clean build
    - ./gradlew clean build -Pforgebuild=true
  rules:
    - if: $CI_COMMIT_MESSAGE =~ /^1.8.9/
    - if: $CI_COMMIT_MESSAGE =~ /^all/
